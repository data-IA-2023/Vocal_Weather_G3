<html>
    <head>
        <title>{{ title }}</title>
        <style>
            table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
            }

            td, th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
            }

            tr:nth-child(even) {
            background-color: #dddddd;
            }

            #weather {
                display: flex;
                flex-direction: row;
                align-items: center;
            }
        </style>
    </head>
    <body>
        <h1>Reconnaissance Vocale</h1>
        <form action="/speech-to-text" method="post">
            <button type="submit">
                <img src="https://img.icons8.com/material/24/000000/microphone--v1.png"/>
            </button>
        </form>
        {% if result %}
            
            <form action="/decode" method="GET">
                <textarea id="textarea" name="speech_text" >{{ result }}</textarea>
                <button type="submit">Voir Forecast</button>
            </form>
        

        {% endif %}
        {% if ville %}
            <form action="/forecast" method="GET">
                <h1>{{ ville }}</h1>
                <input type="hidden" name="city" value="{{ ville }}">
                <button type="submit">Voir Forecast</button>
            </form>
        {% endif %}



        {% if data %}
            <table>
                <tr>
                    <th>Time</th>
                    <th>Temperature</th>
                    <th>Humidity</th>
                    <th>Weather</th>
                    <th>Wind</th>
                </tr>
                {% for item in data["list"] %}
                    <tr>
                        <td>{{ item["dt_txt"] }}</td>
                        <td>{{ item["main"]["temp"] }}Â°C</td>
                        <td>{{ item["main"]["humidity"] }}%</td>
                        <td><div id="weather"><img src="https://openweathermap.org/img/wn/{{ item["weather"][0]["icon"] }}.png"></img> {{ item["weather"][0]["main"] }}</div></td>
                        <td>{{ '%.2f' % (item["wind"]["speed"]*3.6) }} km/h ({{ item["wind"]["deg"] }} deg)</td>
                    </tr>
                {% endfor %}
            </table>
        {% endif %}
    </body>
</html>